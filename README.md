
# ğŸ›¡ï¸ ë©€í‹°í”Œë ˆì´ ë””íœìŠ¤ ê²Œì„ (Photon / Unity)

Unity ê¸°ë°˜ì˜ ë©€í‹°í”Œë ˆì´ íƒ€ì›Œ ë””íœìŠ¤ ê²Œì„ì…ë‹ˆë‹¤.  
í”Œë ˆì´ì–´ëŠ” ì¹´ë“œ ìœ ë‹›ì„ ì†Œí™˜í•˜ê³  ë°°ì¹˜í•˜ë©°, ì ì˜ ë¬¼ê²°ì„ ë§‰ì•„ë‚´ì•¼ í•©ë‹ˆë‹¤.  
Photonì„ í™œìš©í•œ ì‹¤ì‹œê°„ ë™ê¸°í™”ì™€ ë“œë˜ê·¸, ê°€ì± , ì¹´ë©”ë¼ ì¡°ì‘ ê¸°ëŠ¥ì„ í†µí•´ ëª°ì…ë„ ìˆëŠ” ì „ëµ í”Œë ˆì´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

---


## ğŸ“Œ Features

- ğŸ® ì‹±ê¸€ & ë©€í‹°í”Œë ˆì´ì–´ ëª¨ë“œ
- ğŸ§± íƒ€ì›Œ ë°°ì¹˜ ë° ì—…ê·¸ë ˆì´ë“œ
- ğŸ± ê°€ì± ë¥¼ í†µí•œ ìœ ë‹› ì†Œí™˜
- ğŸ§  AI ì  ìœ ë‹› ìŠ¤í° ë° ê²½ë¡œ ì´ë™
- ğŸ”„ ì”¬ ì „í™˜ ë° í˜ì´ë“œ íš¨ê³¼
- ğŸ‘€ ì¹´ë©”ë¼ ì¤Œ ë° ì´ë™ ê¸°ëŠ¥
- ğŸš© íŒ€ ì „ìš© íƒ€ì›Œ (Red / Blue)

---


## ğŸ“¸ ë°ëª¨

> âœ¨ í”Œë ˆì´ ì˜ìƒ / ìŠ¤í¬ë¦°ìƒ· ì¶”ê°€ ì˜ˆì •

---

## âš™ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Unity C#**
- **Photon PUN2** (ë©€í‹°í”Œë ˆì´ ë„¤íŠ¸ì›Œí¬)
- **UI/UX**
  - ë“œë˜ê·¸ ì•¤ ë“œë¡­
  - ì¹´ë“œ ê¸°ë°˜ ìœ ë‹› ì†Œí™˜
- **í™•ë¥  ê¸°ë°˜ ê°€ì±  ì‹œìŠ¤í…œ**
- **ì  ìƒíƒœì´ìƒ (ì¤‘ë…, ê¸°ì ˆ) ì‹œìŠ¤í…œ**
- **ë¼ìš´ë“œ ë° ì „ë ¥ í‰ê°€ ì•Œê³ ë¦¬ì¦˜**
- **ë©€í‹° í„°ì¹˜ ì¹´ë©”ë¼ ì´ë™ / ì¤Œ**

---

## ğŸ“ í´ë” êµ¬ì¡°

```plaintext
Assets/
â”œâ”€â”€ Scripts/
â”‚   â”œâ”€â”€ gameManager_Multi.cs
â”‚   â”œâ”€â”€ Gacha_multi.cs
â”‚   â”œâ”€â”€ DragController_multi.cs
â”‚   â”œâ”€â”€ Enemy_Mulit.cs
â”‚   â”œâ”€â”€ HandCardDragHover.cs
â”‚   â”œâ”€â”€ PanZoom.cs
â”‚   â””â”€â”€ PhotoManager.cs
â”‚   â””â”€â”€ ....
â”œâ”€â”€ Prefabs/
â”œâ”€â”€ Scenes/
â””â”€â”€ ...
```

---


## ğŸš€ Getting Started

1. Unityì—ì„œ í”„ë¡œì íŠ¸ ì—´ê¸°
2. `MainMenu` ì”¬ì„ ì‹œì‘ ì”¬ìœ¼ë¡œ ì„¤ì •
3. í”Œë ˆì´ ëª¨ë“œ ì‹¤í–‰ í›„ ì‹±ê¸€ ë˜ëŠ” ë©€í‹° ëª¨ë“œ ì„ íƒ
4. ìœ ë‹› ê°€ì±  â†’ íƒ€ì›Œ ì„¤ì¹˜ â†’ ì ì˜ ì›¨ì´ë¸Œ ë°©ì–´

---

## ğŸ’¡ Development Stack

- Unity (2020+)
- C#
- Photon (Multiplayer support, ì¶”ì •)
- êµ¬ì¡°í™”ëœ ê°ì²´ì§€í–¥ ìŠ¤í¬ë¦½íŠ¸ êµ¬ì„±

---

## ğŸ§  ì£¼ìš” ì½”ë“œ ì„¤ëª…

### ğŸ”§ DragController_multi.cs â€“ ìœ ë‹› ë“œë˜ê·¸ ë° íŒë§¤ ì²˜ë¦¬

```csharp
if (dragging && Input.GetMouseButtonUp(0))
{
    dragging = false;
    Turret_multi turret = gameObject.GetComponent<Turret_multi>();
    if (isSell)
    {
        if (turret.tower_count == 1)
        {
            gameManager_Multi.Money += 3;
        }
        if (turret.tower_count == 2)
        {
            gameManager_Multi.Money += 5;
        }
        if (turret.tower_count == 3)
        {
            gameManager_Multi.Money += 7;
        }
        if (turret.tower_count == 4)
        {
            gameManager_Multi.Money += 9;
        }
        if (turret.tower_count == 5)
        {
            gameManager_Multi.Money += 15;
        }
        if (turret.tower_count == 6)
        {
            gameManager_Multi.Money += 30;
        }

        PhotonNetwork.Destroy(gameObject);
    }
}
```

- ë“œë˜ê·¸ ì¤‘ ë§ˆìš°ìŠ¤ë¥¼ ë†“ì•˜ì„ ë•Œ, í•´ë‹¹ ìœ ë‹›ì´ íŒë§¤ êµ¬ì—­ì— ìˆë‹¤ë©´ `tower_count`ì— ë”°ë¼ ìê¸ˆì„ í™˜ê¸‰í•´ì£¼ê³  ì˜¤ë¸Œì íŠ¸ë¥¼ íŒŒê´´í•©ë‹ˆë‹¤.

---

### ğŸ’€ Enemy_Mulit.cs â€“ ì  ì²´ë ¥ ê´€ë¦¬ ë° ì‚¬ë§ ì²˜ë¦¬

```csharp
public void TakeDamage(float amount)
{
    health -= amount;
    healthBar.fillAmount = health / startHealth;

    if (health <= 0 && !isDead)
    {
        Die();
    }
}

void Die()
{
    isDead = true;

    GameObject effect = PhotonNetwork.Instantiate(deathEffect.name, transform.position, Quaternion.identity);
    PhotonNetwork.Destroy(effect);

    PhotonNetwork.Destroy(gameObject);
    gameManager_Multi.EnemyCount--;
    gameManager_Multi.EnemyKillCount++;
    gameManager_Multi.Money += 5;
}
```

- ì ì´ ë°ë¯¸ì§€ë¥¼ ë°›ì•„ ì£½ëŠ” ê³¼ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- ì²´ë ¥ UI ê°±ì‹ , ì´í™íŠ¸ ìƒì„±, ì  ì œê±° ë° ê²Œì„ ìƒíƒœ ì—…ë°ì´íŠ¸ í¬í•¨.

---

### ğŸ² Gacha_multi.cs â€“ í™•ë¥ í˜• ìœ ë‹› ì†Œí™˜

```csharp
int Choose(float[] probs)
{
    total = 0;

    foreach (float elem in probs)
    {
        total += elem;
    }

    float randomPoint = Random.value * total;

    for (int i = 0; i < probs.Length; i++)
    {
        if (randomPoint < probs[i])
        {
            return i;
        }
        else
        {
            randomPoint -= probs[i];
        }
    }
    return probs.Length - 1;
}
```

- ê°€ì±  í™•ë¥ ì— ë”°ë¼ ìœ ë‹›ì„ ëœë¤ ì„ íƒí•˜ëŠ” í•µì‹¬ ë¡œì§ì…ë‹ˆë‹¤.

---

### ğŸ“Š gameManager_Multi.cs â€“ ë¼ìš´ë“œ ìœ ë‹› ì§‘ê³„

```csharp
public void check()
{
    int Grade_cat = 0;
    int Grade_dog = 0;
    int Grade_mouse = 0;
    var turret = new List<GameObject>();

    GameObject[] cat = GameObject.FindGameObjectsWithTag("cat");
    GameObject[] dog = GameObject.FindGameObjectsWithTag("dog");
    GameObject[] mouse = GameObject.FindGameObjectsWithTag("mouse");

    turret.AddRange(cat);
    turret.AddRange(dog);
    turret.AddRange(mouse);

    foreach (GameObject t in turret)
    {
        if (t == null) break;

        if (t.tag == "cat")
        {
            Grade_cat += t.GetComponent<Turret_multi>().tower_count;
        }
        else if (t.tag == "dog")
        {
            Grade_dog += t.GetComponent<Turret_multi>().tower_count;
        }
        else if (t.tag == "mouse")
        {
            Grade_mouse += t.GetComponent<Turret_multi>().tower_count;
        }
    }

    if (turret.Count != 0)
    {
        WaveSpawner_Multi.turretCounts[0] = Grade_cat;
        WaveSpawner_Multi.turretCounts[1] = Grade_dog;
        WaveSpawner_Multi.turretCounts[2] = Grade_mouse;
    }
}
```

- ë°°ì¹˜ëœ ìœ ë‹›ì˜ ì¢…ë¥˜ì™€ ë ˆë²¨ì„ ìˆ˜ì¹˜ë¡œ ì§‘ê³„í•˜ì—¬ ë‚œì´ë„ ë°˜ì˜.

---

### ğŸƒ HandCardDragHover.cs â€“ ì¹´ë“œ ë“œë˜ê·¸ ë° ìœ ë‹› ë°°ì¹˜

```csharp
public void OnEndDrag(PointerEventData eventData)
{
    ...
    var ray = Camera.main.ScreenPointToRay(Input.mousePosition);
    RaycastHit hit;
    if (Physics.Raycast(ray, out hit))
    {
        v4.x = hit.point.x;
        v4.y = 0.63f;
        v4.z = hit.point.z;
        obj.GetComponent<spawn>().spawnarea(v4);
    }
    ...
}
```

- ë“œë˜ê·¸í•œ ì¹´ë“œë¥¼ í•„ë“œì— ë°°ì¹˜í•˜ê³ , í•´ë‹¹ ìœ„ì¹˜ì— ìœ ë‹›ì„ ìƒì„±í•©ë‹ˆë‹¤.

---

### ğŸ—ºï¸ PanZoom.cs â€“ ì¹´ë©”ë¼ ì´ë™ ë° ì¤Œ

```csharp
public void OnDrag()
{
    int touchCount = Input.touchCount;

    if (touchCount == 1 && drag_check == false)
    {
        if (prevPos == Vector2.zero)
        {
            prevPos = Input.GetTouch(0).position;
            return;
        }
        Vector2 dir = (Input.GetTouch(0).position - prevPos).normalized;
        Vector3 vec = new Vector3(dir.x, 0, dir.y);

        cam.position -= vec * moveSpped * Time.deltaTime;
        prevPos = Input.GetTouch(0).position;
    }

    else if (touchCount == 2)
    {
        if (prevDistance == 0)
        {
            prevDistance = Vector2.Distance(Input.GetTouch(0).position, Input.GetTouch(1).position);
            return;
        }
        float curDistance = Vector2.Distance(Input.GetTouch(0).position, Input.GetTouch(1).position);
        float move = prevDistance - curDistance;

        Vector3 pos = cam.position;

        if (move < 0)
        {
            pos.y -= moveSpped * Time.deltaTime;
        }
        else if (move > 0)
        {
            pos.y += moveSpped * Time.deltaTime;
        }

        cam.position = pos;
        prevDistance = curDistance;
    }
}
```

- 1ì†ê°€ë½ìœ¼ë¡œ ë“œë˜ê·¸ ì´ë™, 2ì†ê°€ë½ìœ¼ë¡œ í™•ëŒ€/ì¶•ì†Œ ì¡°ì‘.

---

### ğŸŒ PhotoManager.cs â€“ Photon ì—°ê²° ì´ˆê¸°í™”

```csharp
private void Awake()
{
    PhotonNetwork.AutomaticallySyncScene = true;
    PhotonNetwork.GameVersion = version;

    Debug.Log(PhotonNetwork.SendRate);
    PhotonNetwork.ConnectUsingSettings();
}
```

- ë©€í‹°í”Œë ˆì´ ê¸°ëŠ¥ í™œì„±í™”ë¥¼ ìœ„í•œ Photon ì´ˆê¸° ì„¤ì •.

---

## âœ… ì‹¤í–‰ ë°©ë²•

1. Unity 2021.3 ì´ìƒì—ì„œ í”„ë¡œì íŠ¸ ì—´ê¸°
2. Photon PUN 2 íŒ¨í‚¤ì§€ ì„í¬íŠ¸
3. Main ì”¬ ì‹¤í–‰
4. 2ëª… ì´ìƒ ì ‘ì† ì‹œ ìë™ ê²Œì„ ì‹œì‘

---

## ğŸ™‹â€â™‚ï¸ ì œì‘ì

| ì´ë¦„ | ì—­í•  |
|------|------|
| [Jo Seongin](https://github.com/ho9909) | í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë˜ë°, Photon ë©€í‹°í”Œë ˆì´, UI/UX êµ¬í˜„, ê²Œì„ ê¸°íš ë° ë°¸ëŸ°ì‹± |

---

## ğŸ“œ ë¼ì´ì„ ìŠ¤

ë³¸ í”„ë¡œì íŠ¸ëŠ” ê°œì¸ í¬íŠ¸í´ë¦¬ì˜¤ ìš©ë„ë¡œ ì œì‘ë˜ì—ˆìœ¼ë©°, ìƒì—…ì  ì‚¬ìš©ì€ ê¸ˆì§€ë©ë‹ˆë‹¤.
